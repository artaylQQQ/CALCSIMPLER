---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'fs';
import path from 'path';

const contentDir = path.resolve(Astro.cwd, 'src/pages/calculators');
let items = [];
try {
  const files = fs.readdirSync(contentDir).filter(f => f.endsWith('.mdx')).slice(0, 24);
  items = files.map(f => {
    const slug = f.replace(/\.mdx$/,'');
    const txt = fs.readFileSync(path.join(contentDir,f),'utf-8');
    const m = txt.match(/title:\s*"(.*?)"/);
    const title = m ? m[1] : slug.replace(/-/g,' ');
    return { slug, title };
  });
} catch {}
---

<BaseLayout title="Online Calculators" description="Fast, accurate calculators across finance, math, conversions and more.">
  <p>Compute results instantly with step-by-step details. Browse our latest calculators:</p>
  <div class="grid">
    {items.map(i => (
      <a class="card" href={`/calculators/${i.slug}/`} aria-label={i.title}>
        <strong>{i.title}</strong>
        <div class="muted">Open calculator</div>
      </a>
    ))}
  </div>
</BaseLayout>
